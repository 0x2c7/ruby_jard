<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Ruby Jard by nguyenquangminh0711</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Ruby Jard</h1>
      <h2 class="project-tagline">Just another ruby debugger. Provide a better experience while debugging Ruby</h2>
      <a href="https://github.com/nguyenquangminh0711/ruby_jard" class="btn">View on GitHub</a>
      <a href="https://github.com/nguyenquangminh0711/ruby_jard/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/nguyenquangminh0711/ruby_jard/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <p><img src="./docs/logo.jpg" alt="Ruby Jard"></p>
<p>Jard stands for Just Another Ruby Debugger, aims to provide a better experience while debugging Ruby. Ruby Jard supports the following major features at the moment:</p>
<ul>
<li>Informative Terminal UI, reduce your mental effort for repeated stuff so that you can focus on killing bugs.</li>
<li>Highlighted source code screen.</li>
<li>Backtrace visualization and navigation.</li>
<li>Auto variable display in the current context.</li>
<li>Multi-thread exploration and debugging.</li>
</ul>
<p>Ruby Jard's core is <a href="https://github.com/deivid-rodriguez/byebug">Byebug</a>, an awesome de factor debugger for Ruby. Therefore, Ruby Jard supports most of Byebug's functionalities.</p>
<p>If you still don't know what it is, let's watch this video.</p>
<p><a href="https://asciinema.org/a/348526"><img src="https://asciinema.org/a/348526.svg" alt="asciicast"></a></p>
<h2>
<a id="getting-started" class="anchor" href="#getting-started" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Getting Started</h2>
<p><strong>Warning</strong>: Ruby Jard is still under heavy development. Bugs and weird behaviors are expected. If you see one, please don't hesitate to open an issue. I'll try my best to fix.</p>
<p>Add <code>ruby_jard</code> to your Gemfile, recommend to put it in test or development environment.</p>
<div class="highlight highlight-source-ruby"><pre><span class="pl-en">gem</span> <span class="pl-s">'ruby_jard'</span></pre></div>
<p>Add magic method <code>jard</code> before the line you want to debug, just like <code>byebug</code></p>
<div class="highlight highlight-source-ruby"><pre><span class="pl-k">def</span> <span class="pl-en">test_method</span>
  <span class="pl-s1">a</span> <span class="pl-c1">=</span> <span class="pl-c1">1</span>
  <span class="pl-s1">b</span> <span class="pl-c1">=</span> <span class="pl-c1">2</span>
  <span class="pl-en">jard</span> <span class="pl-c"># Debugger will stop here</span>
  <span class="pl-s1">c</span> <span class="pl-c1">=</span> <span class="pl-s1">a</span> + <span class="pl-s1">b</span>
<span class="pl-k">end</span></pre></div>
<h2>
<a id="screens" class="anchor" href="#screens" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Screens</h2>
<p>When Jard attaches at any line of code, the main tile-style UI shows up. By default, there are 5 areas on the UI that you'll be interested.</p>
<h3>
<a id="source-panel" class="anchor" href="#source-panel" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Source panel</h3>
<img src="./docs/screen-source.png" alt="Source screen">
<p>This panel shows the current line of code that your program is stopping, and surrounding related lines. The number of lines shown in this panel depends on your current terminal height, but never less than 5.</p>
<p>Ruby Jard supports any file extensions that your program runs into, especially <code>.rb</code>, <code>.erb</code>, <code>.haml</code> files. Other file types may encounter minor syntax highlighting issues.</p>
<p>Ruby Jard also supports inspecting gems and libraries, if you are interested.</p>
<h3>
<a id="backtrace-panel" class="anchor" href="#backtrace-panel" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Backtrace panel</h3>
<img src="./docs/screen-backtrace.png" alt="Screen backtrace">
<p>This panel describes the current backtrace of the current thread your program is stopping. Each line of this panel describes the current Frame. What is frame and backtrace by the way? Let's step back a little bit at how Ruby executes your code. Internally, Ruby uses an interpreter to read and execute your code, line by line (technically, YARD instructions, but let's go with a simple version). When it meets a chunk of code that needs to open a new scope, like method calls or inline-block call, the interpreter creates a new structure to store the current context so that it can link to the next scope and go back later. This data structure is call Frame. The interpreter pushes frame into a stack, called backtrace (or stack trace, or call stack, whatever), and continues to execute your code. Each thread has a separate backtrace. To understand deeply, you may be interested in this wonderful slide: <a href="https://www.slideshare.net/KeitaSugiyama1/grow-and-shrink-dynamically-extending-the-ruby-vm-stack">Grow and Shrink - Dynamically Extending the Ruby VM Stack</a>.</p>
<p>Overall, the whole backtrace panel lets you know where you are stopping at, the trace of how your program is running. When combining with other tools and other panels, you will be surprised by how much information the bugger can help you when you encounter your bugs.</p>
<p>Each frame includes the following information:</p>
<ul>
<li>Frame ID: incremental, can be used to jump to an arbitrary frame with frame command.</li>
<li>Current location label: a class name and method name of the method covers its frame. If there is a <code>[c]</code> prefix in front of a class name, it means that the method is provided by Ruby, implemented in C, and impossible to peek.</li>
<li>Current physical location: exact file name and line number. If a frame is allocated in a gem, the physical location shows a gem name and version only. For example: <code>RSpec::Core::Hooks::HookCollections in run in rspec-core (3.9.2)</code>.</li>
</ul>
<h3>
<a id="variable-panel" class="anchor" href="#variable-panel" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Variable panel</h3>
<img src="./docs/screen-variables.png" alt="Variables screen">
<p>The variable panel lets you explore all the local variables, instance variables, and constants in the current display context. Each variable is described by:</p>
<ul>
<li>Inline indicator: the beginning dot (<code>‚Ä¢</code>) implies a variable that appears in the current line.</li>
<li>Variable type: allow you to know the type of a variable at a single glance. Only built-in types, such as <code>int</code>, <code>flt</code>, <code>hash</code>, <code>bool</code>, <code>rng</code>, are supported. Instances of any classes will be noted as <code>var</code>.</li>
<li>Size of variable: the size of collection-like variables. Current Jard version supports 3 types:
<ul>
<li>Hash: this field shows the number of keys</li>
<li>Array: this field shows the number of items</li>
<li>String: this field shows the number of character (fetched from<code>String#size</code> method)</li>
</ul>
</li>
<li>Variable inspection: the content of the variable. The current Jard version generates this field by calling <code>#inspect</code>. <strong>Known issue</strong>: this accidentally triggers materializing method of objects, such as <code>ActiveRecord::Relation</code>. Future Jard version gonna fix this by a new safe generator.</li>
</ul>
<p>This panel interacts well with backtrace panel and backtrace-exploring commands such as (<code>up</code>, <code>down</code>, <code>frame</code>, etc.) to inspect relative variables at each frame layer in the program. A common use case is to recall the parameter values you forgot when digging too deep into a method call.</p>
<p>By default, the variables are sorted by the following criteria:</p>
<ul>
<li>Pinned variables (coming soon)</li>
<li>Current context (self)</li>
<li>Local variables</li>
<li>Instance variables</li>
<li>Constants</li>
<li>Global variables (coming soon)</li>
</ul>
<h3>
<a id="thread-panel" class="anchor" href="#thread-panel" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Thread panel</h3>
<img src="./docs/screen-threads.png" alt="Screen threads">
<p>Show all the threads running at the moment. This panel is useful when you are working with a complicated multi-threaded environment like web server, or background jobs.</p>
<h3>
<a id="repl-panel" class="anchor" href="#repl-panel" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Repl panel</h3>
<img src="./docs/screen-repl.png" alt="Screen repl">
<p>An interactive Repl for you to interact with your program, inspect values, update values, or control the debug flow as you want. The heart of Jard's repl is <a href="https://github.com/pry/pry">Pry</a>, a masterpiece gem. When you type a command, Jard parses, and does corresponding actions if what you type matches supported command. Otherwise, they are evaluated as Ruby code.</p>
<h2>
<a id="commands" class="anchor" href="#commands" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Commands</h2>
<h3>
<a id="step" class="anchor" href="#step" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Step</h3>
<p><strong>Repl command</strong>: <code>step</code></p>
<p><strong>Key binding</strong>: F7</p>
<p>Detect and step into a method call or block in the current line. If there isn't anything to step in, the program continues to next line. In case there are multiple methods on the same line, Jard hornors Ruby's execution order.</p>
<h3>
<a id="step-out" class="anchor" href="#step-out" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Step out</h3>
<p><strong>Repl command</strong>: <code>step-out</code></p>
<p><strong>Key binding</strong>: Shift + F7</p>
<p>The opposite of step out. This command is used to finish the execution of current frame, and jump to the next line of upper frame. In other words, this command is equivalent to the sequence <code>up</code> and <code>next</code>. If the neighbor frame already finishes, it continues with even higher frame.</p>
<p>This command is useful when you loose your interest in frame, and want to quickly go up again. One example is that you accidentally step into a longgggg loop with nothing useful. Another example is that you step into the library source code and don't really care what it does underlying.</p>
<h3>
<a id="next" class="anchor" href="#next" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Next</h3>
<p><strong>Repl command</strong>: <code>next</code></p>
<p><strong>Key binding</strong>: F8</p>
<p>Continue to the next line in the current frame, by pass any steppable method call or blocks in the mid way unless they contains dynamic breakpoint or any <code>jard</code> attachment command. If the current frame already reaches the end, it continues to the next line of upper frame and so on.</p>
<h3>
<a id="continue" class="anchor" href="#continue" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Continue</h3>
<p><strong>Repl command</strong>: <code>continue</code></p>
<p><strong>Key binding</strong>: F9</p>
<p>Continue the execution of your program to the end, or stop at the first dynamic break point or <code>jard</code> attachment command. One common confusion is that long-running ruby processes, such as web server or background jobs, won't stop, and may be used to debug the next request without restarting. If you want to end everything and just exit the process, let's use <code>exit</code>.</p>
<h3>
<a id="up" class="anchor" href="#up" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Up</h3>
<p><strong>Repl command</strong>: <code>up</code></p>
<p><strong>Key binding</strong>: F6</p>
<p>Explore the upper frame. When you use this command, all associated displaying screens will be updated accordingly, but your program current position is still at the latest frame. This command is mostly used to explore, and view the trace, input parameters, or how your program stops at the current position. When use this command, you should have a glance at Variable panel, and Source panel to see the variables at destination frame.</p>
<p>You can combine with <code>next</code> or <code>step</code> to perform powerful execution redirection at the destination frame. Let's look at an example. You are debugging a chain of 10 rack middlewares, you go deep into the #9 middleware, found something, then want to go back to #5 middleware. It's pretty boring and frustrated to just use <code>next</code> or <code>step-out</code> and hope it eventually goes back. Now use <code>up</code> for some times (or <code>frame</code>, described below) to go to your desired frame, and use <code>next</code> there. Tada, it's magical, just like teleport.</p>
<p>One note is that you cannot explore a frame in c.</p>
<h3>
<a id="down" class="anchor" href="#down" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Down</h3>
<p><strong>Repl command</strong>: <code>down</code></p>
<p><strong>Key binding</strong>: Shift+F6</p>
<p>Explore the lower frame. See <code>up</code> command for more information.</p>
<h3>
<a id="frame" class="anchor" href="#frame" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Frame</h3>
<p><strong>Repl command</strong>: <code>frame &lt;frame_id&gt;</code></p>
<p><strong>Key binding:</strong> None</p>
<p><strong>Examples</strong>:<code>frame 10</code></p>
<p>Explore a particular frame with id <code>&lt;frame_id&gt;</code>. It's faster than <code>up</code> and <code>down</code>. See <code>up</code> command for more information.</p>
<h2>
<a id="roadmap" class="anchor" href="#roadmap" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Roadmap</h2>
<p>The ultimate goal of Ruby Jard is to provide a better experience while debugging Ruby. All the items in the roadmap are supposed to serve that. However, I have a life. There won't be any promises on when those items will be finished. In fact, this roadmap may be changed at anytime, depends on the current direction, focus and circumstances.</p>
<h3>
<a id="done-version-010-proof-of-concept" class="anchor" href="#done-version-010-proof-of-concept" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>[Done] Version 0.1.0: Proof of concept</h3>
<p>This version is a bootstrap to see whether my idea works or not, in term of technical possibility and user usability. Luckily, everything works now, and I receive possible feedback from friends and peers.</p>
<h3>
<a id="done-version-020-ui-completeness" class="anchor" href="#done-version-020-ui-completeness" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>[Done] Version 0.2.0: UI completeness</h3>
<p>The bootstrap version is just a series of ugly prints on stdout. It's frustrated as many things can be broken, wrong drawing, text overlapping, etc. This version is to fix those issues, and provide a foundation for more complicated drawing.</p>
<h3>
<a id="version-030-complete-the-workflow" class="anchor" href="#version-030-complete-the-workflow" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Version 0.3.0: Complete the workflow</h3>
<p>This version focuses on making Jard usable for daily activities of any developer. In other words, this version is to become a complete replacement for Byebug (sorry <g-emoji class="g-emoji" alias="pray" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f64f.png">üôè</g-emoji>).</p>
<ul>
<li>Dynamic breakpoints.</li>
<li>Watch expressions.</li>
<li>Pin variables.</li>
<li>Program's STDOUT panel.</li>
<li>Post moterm.</li>
<li>Trace variable changes.</li>
<li>Multi-threaded debugging.</li>
<li>Fulfill options for existing commands.</li>
<li>Add more commands to control workflow.</li>
<li>etc.</li>
</ul>
<h3>
<a id="version-040-user-satisfaction" class="anchor" href="#version-040-user-satisfaction" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Version 0.4.0: User satisfaction</h3>
<p>Ruby Jard now serves well for all debugging use case. But it becomes floated, hard to use, and maybe just not "click" for the user. This version focuses on improve userability, stability, bugs, tweak small details. So that, after this version, Ruby Jard is just pleasant to use.</p>
<ul>
<li>Support different screen sizes.</li>
<li>Minimal layout configuration.</li>
<li>Allow customizations (keyboard shortcut for example).</li>
<li>Rebuild variable inspection to optimize for each data type, especially nested complicated structure.</li>
<li>Collapsible and expandale variable inspection.</li>
<li>Windows, viewport, scrolling, etc.</li>
<li>Navigate between panels.</li>
<li>Build a buffer system to reduce interaction with STDOUT, and eventually improve drawing latency.</li>
</ul>
<h3>
<a id="version-050-integration" class="anchor" href="#version-050-integration" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Version 0.5.0: Integration</h3>
<p>Accept or not, not everyone uses vim, or even terminal. Even in the terminal, I just want to provide minimal layout customizations, as I don't want to rebuild Tmux. Therefore, integration with other powerful systems to extend use cases, adapt different work flow and preferences is the focus on this version. I'm not sure about the ultimate solution, but at my limited knowledge now, <a href="https://microsoft.github.io/debug-adapter-protocol/">Debugger Adapter Protocol</a> looks promising.</p>
<ul>
<li>Prepare the infrastructure for DAP protocol.</li>
<li>Separate and split the panels into possible isolated processes, connect them together with DAP.</li>
<li>Fully layout configurations and integrate with Tmux.</li>
<li>Integrate with Vim 8+/Neovim via Terminal mode.</li>
<li>Integrate with Visual Studio Code via DAP.</li>
<li>Integrate with Emacs via dap mode.</li>
<li>Encrypted remote debugging.</li>
</ul>
<h3>
<a id="further-future" class="anchor" href="#further-future" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Further future</h3>
<p>I won't stop until 0.5.0 version, even Jard doesn't have any users. However, as soon as it reaches 0.5.0, and serves my interest well, I don't have much things in mind now. The future is uncertain. Dreaming is good. Making dreams come true is hard, and time-consuming. Hope I can reach that future.</p>
<h2>
<a id="contributing" class="anchor" href="#contributing" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Contributing</h2>
<p>Bug reports and pull requests are welcome on GitHub at <a href="https://github.com/nguyenquangminh0711/ruby_jard">https://github.com/nguyenquangminh0711/ruby_jard</a>. This project is intended to be a safe, welcoming space for collaboration, and contributors are expected to adhere to the <a href="https://github.com/nguyenquangminh0711/ruby_jard/blob/master/CODE_OF_CONDUCT.md">code of conduct</a>.</p>
<h2>
<a id="license" class="anchor" href="#license" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>License</h2>
<p>The gem is available as open source under the terms of the <a href="https://opensource.org/licenses/MIT">MIT License</a>.</p>
<h2>
<a id="code-of-conduct" class="anchor" href="#code-of-conduct" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Code of Conduct</h2>
<p>Everyone interacting in the RubyJard project's codebases, issue trackers, chat rooms and mailing lists is expected to follow the <a href="https://github.com/%5BUSERNAME%5D/ruby_jard/blob/master/CODE_OF_CONDUCT.md">code of conduct</a>.</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/nguyenquangminh0711/ruby_jard">Ruby Jard</a> is maintained by <a href="https://github.com/nguyenquangminh0711">nguyenquangminh0711</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
